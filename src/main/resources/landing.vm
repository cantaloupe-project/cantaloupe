<!DOCTYPE html>
<html>
  <head>
    #parse("head_common.vm")

    <title>Cantaloupe Image Server</title>
  </head>

  <body id="cl-landing">
    <div class="container-fluid">
      <header>
        <img src="/static/cantaloupe.jpg" alt="Cantaloupe icon"
             width="154" height="82" style="float:left">
        <h1>Cantaloupe Image Server <small>$version</small></h1>
        <a href="https://medusa-project.github.io/cantaloupe/">Home (GitHub)</a>
      </header>

      <section>
        <h3>Endpoints</h3>
        <dl>
          <dt>IIIF Image API 1.1</dt>
          <dd>/iiif/1.1</dd>
          <dt>IIIF Image API 2.0</dt>
          <dd>/iiif/2.0</dd>
        </dl>
      </section>

      <section>
        <div class="row">
          <div class="col-sm-6">
            <h3>Resolver</h3>
            <p>$resolverName</p>
          </div>
          <div class="col-sm-6">
            <h3>Cache</h3>
            <p>$cacheName</p>
          </div>
        </div>
      </section>

      <section>
        <div class="row">
          <div class="col-sm-6">
            <h3>Effective Source Format Assignments</h3>

            <table class="table table-condensed table-bordered"
                   id="cl-source-format-assignments">
              #foreach ($sourceFormat in $processorAssignments.keySet())
                <tr>
                  <td style="width:30%">$sourceFormat.getName()</td>
                  <td>$processorAssignments.get($sourceFormat)</td>
                </tr>
              #end
            </table>
          </div>

          <div class="col-sm-6">
            <h3>Memory</h3>
            <table class="table table-condensed table-bordered">
              <tr>
                <td>Used Heap</td>
                <td>$usedHeap MB</td>
              </tr>
              <tr>
                <td>Available Heap</td>
                <td>$freeHeap MB</td>
              </tr>
              <tr>
                <td>Total Heap</td>
                <td>$totalHeap MB</td>
              </tr>
              <tr>
                <td>Max Heap</td>
                <td>$maxHeap MB</td>
              </tr>
            </table>
          </div>
        </div>
      </section>

      <section>
        <h3>Supported Source Formats</h3>

        <table class="table table-condensed table-bordered">
          <tr>
            <th></th>
            #foreach ($sourceFormat in $sourceFormats)
              <th class="text-center">$sourceFormat.getName()</th>
            #end
          </tr>

          #foreach ($processor in $processors)
            <tr>
              <td>$processor.getClass().getSimpleName()</td>
              #foreach ($sourceFormat in $sourceFormats)
                <td class="text-center">
                  #if ($processor.getAvailableOutputFormats($sourceFormat).size() > 0)
                    <span class="text-success">&check;</span>
                  #end
                </td>
              #end
            </tr>
          #end
        </table>
      </section>

      <section>
        <h3>VM Arguments</h3>
        <table class="table table-condensed table-bordered">
          #foreach ($arg in $vmArguments)
            <tr>
              <td>$arg</td>
            </tr>
          #end
        </table>
      </section>

    </div>
  </body>
</html>
