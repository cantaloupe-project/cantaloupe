---
layout: default
---

<ol class="breadcrumb">
  <li><a href="">Home</a></li>
  <li><a href="{{ site.baseurl }}/manual/">User Manual</a></li>
  <li><a href="{{ site.baseurl }}/manual/2.2/">2.2</a></li>
  <li class="active">Watermarking</li>
</ol>

<h1>Watermarking</h1>

<p>The watermarking feature overlays an image "watermark" on top of an output image. This can be useful for applying branding, attribution, copyright notices, and so on.</p>

<p>Position and inset are configurable. Below, all availble positions are pictured with insets of zero:</p>

<table>
  <tr>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-top-left.jpg">
        <figcaption>top left</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-top-center.jpg">
        <figcaption>top center</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-top-right.jpg">
        <figcaption>top right</figcaption>
      </figure>
    </td>
  </tr>
  <tr>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-left-center.jpg">
        <figcaption>left center</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-center.jpg">
        <figcaption>center</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-right-center.jpg">
        <figcaption>right center</figcaption>
      </figure>
    </td>
  </tr>
  <tr>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-bottom-left.jpg">
        <figcaption>bottom left</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-bottom-center.jpg">
        <figcaption>bottom center</figcaption>
      </figure>
    </td>
    <td>
      <figure>
        <img width="260" src="images/watermark-520-bottom-right.jpg">
        <figcaption>bottom right</figcaption>
      </figure>
    </td>
  </tr>
</table>

<h2>Watermark Requirements</h2>

<p>The watermark image must be a 24-bit PNG image, either RGB or RGBA. The watermark will be blended pixel-for-pixel into the output image, respecting its alpha channel.</p>

<p><a href="images/watermark-sample.png">Sample watermark (PNG)</a></p>

<h2>Processor Support</h2>

<p>Not all processors support watermarking; see the <a href="processors.html#Supported%20Features">table of processor supported features</a>.</p>

<h2>Implications</h2>

<h3>Performance</h3>

<p>Watermark application should have minimal impact on response times, adding perhaps a few milliseconds for a typical-sized watermark. One thing to note, though, is that normally, requests for source images with no modification are streamed through with no processing. When watermarking is enabled, this will no longer be the case.</p>

<h3>Zooming Image Viewers</h3>

<p>Zooming image viewers display a mosaic of image tiles. When watermarking is enabled, each tile will have a watermark, which may look more or less strange depending on the size of the watermark and the tile size used by the viewer. The image server has no control over this.</p>

<p>One way of getting around this is to set the <code>watermark.output_width_threshold</code> and <code>watermark.output_height_threshold</code> configuration options to values that are slightly larger than the tile size used by the zooming image viewer. This will disable watermarking for zooming image viewer tiles, but enable for it for anything larger. Unfortunately, the tile size used by the viewer may differ depending on the source image, as the recommended tile sizes in <a href="endpoints.html">information responses</a> will vary on a per-image basis.</p>

<h3>Caching</h3>

<p>Watermark parameters (filename, position, inset, etc.) are encoded in cached-image identifiers. When watermark settings change, cached watermarked images will be re-generated automatically.</p>
